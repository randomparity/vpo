# Single Phase Minimal Policy (V12)
# Simplest possible V12 policy structure
#
# Good starting point for new users. Keeps only English audio and subtitles,
# removing all other language tracks. No transcoding, no reordering.
#
# Usage:
#   vpo policy run -p single-phase-minimal.yaml /path/to/videos/ --dry-run
schema_version: 12
name: Minimal Track Filter
description: Keep only English audio and subtitles — the simplest possible policy.

config:
  # Preferred audio languages in priority order (ISO 639-2/B codes).
  # "und" = undefined/untagged tracks — kept to avoid dropping unlabeled audio.
  audio_language_preference: [eng, und]
  subtitle_language_preference: [eng]

  # What to do when a phase fails for a file:
  #   skip     - skip remaining phases for this file, continue with next file
  #   continue - log the error and keep going to the next phase
  #   fail     - stop processing the entire batch immediately
  on_error: skip

phases:
  - name: filter
    # Audio filter: remove audio tracks whose language is not in the list.
    # At least 1 audio track is always preserved (minimum: 1 is the default).
    audio_filter:
      languages: [eng, und]
      minimum: 1  # Never create an audio-less file

    # Subtitle filter: remove subtitle tracks not matching these languages.
    subtitle_filter:
      languages: [eng]
      # Keep forced subtitle tracks even if their language isn't in the list.
      # Forced subs typically contain translations of on-screen foreign text.
      preserve_forced: true
