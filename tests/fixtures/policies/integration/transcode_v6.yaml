# Transcode policy with skip conditions
# Used for testing video/audio transcoding operations
schema_version: 13

config:
  audio_languages:
    - eng
    - jpn

phases:
  - name: apply
    default_flags:
      set_first_video_default: true
      set_preferred_audio_default: true
      clear_other_defaults: true
    transcode:
      video:
        to: hevc
        skip_if:
          codec_matches:
            - hevc
            - h265
          resolution_within: 1080p
          bitrate_under: 15M
        crf: 28
        preset: ultrafast  # Fast for testing
        max_resolution: 1080p
        scale_algorithm: lanczos
        hw: auto
        hw_fallback: true
      audio:
        preserve:
          - flac
          - truehd
          - dts-hd
        to: aac
        bitrate: 128k
